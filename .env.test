###############################################
# Test environment configuration (local stack)
#
# NOTE: Unlike .env (production defaults) which now
# points at the nginx reverse proxy + domain, the
# integration tests spin up a LOCAL docker-compose
# stack (see test/integration/docker-compose.yml):
#   - InfluxDB: localhost:8086
#   - Mosquitto (MQTT): localhost:1883
#   - Test nginx proxy (optional): localhost:8081
#
# The app-level Env helper loads dotenv first for tests
# (dashboard / widget integration tests call dotenv.load
# with this file). By keeping these values on localhost
# we avoid hitting the production domain during CI runs
# and ensure the Influx health check succeeds quickly.
#
# If you want to exercise the nginx test proxy instead
# set INFLUX_URL to http://localhost:8081 (preferred pathless) or legacy http://localhost:8081/influxdb
# and (optionally) expose a WS path for MQTT. For now we
# connect directly to the core services for fewer moving
# parts and faster startup.
###############################################

# MQTT (direct broker port â€“ NOT the WS proxy)
MQTT_HOST=m0rb1d-server.mynetworksettings.com
MQTT_PORT=1883
MQTT_CLIENT_ID=test_client

# WebSocket MQTT port (used when running as web build)
MQTT_WS_PORT=9001

# (Optional) MQTT over WebSocket path via test proxy
# Uncomment if a WebSocket client test is added later
# MQTT_WS_PORT=8081
# MQTT_WS_PATH=/mqtt

# InfluxDB (default to local direct service or pathless proxy)
# For CI/local integration use direct container:
# INFLUX_URL=http://localhost:8086
# Using shared dev reverse proxy (pathless):
INFLUX_URL=http://m0rb1d-server.mynetworksettings.com:8080
INFLUX_TOKEN=test-token-for-integration-tests
INFLUX_ORG=test-org
INFLUX_BUCKET=test-bucket

# Flag to help code paths detect test context if needed
TEST_ENV=true

# Disable real MJPEG implementation in unit tests for deterministic timing
REAL_MJPEG=true
